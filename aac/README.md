# AAC Control Center

A portable account and character control (AAC) portal designed for LAMP/XAMPP stacks. It ships with a setup wizard, theming system, and core modules for account management, characters, market, highscores, guilds, media, PvP, server status, and admin tools.

## Features
- Guided setup wizard with environment, database, admin, and demo seed steps
- Argon2id authentication, CSRF tokens, and rate-limited login attempts
- Modular controllers for Accounts, Characters, Market escrow, Guilds, Media, PvP, Status, and Admin RBAC
- Theme adapter for importing any HTML template; switch themes by editing `config/app.php`
- File-based caching for highscores and status checks
- Demo seeder populates rich sample data with `is_demo` markers

## Installation (XAMPP)
1. Copy the `aac/` directory into your XAMPP `htdocs` folder.
2. Ensure PHP 8.2+ and MySQL/MariaDB are enabled.
3. Visit `http://localhost/aac/public/setup` in your browser.
4. Complete the setup wizard:
   - Accept the EULA
   - Provide database credentials and schema version (10.98 or 8.60)
   - Create the administrator account
   - Configure site options (site name, timezone, base URL, theme, feature toggles)
   - Optionally load demo data
   - Finalize installation
5. After installation, the wizard locks via `storage/.installed`.

## Setup Wizard Screenshots
Screenshots can be generated by running the wizard locally and capturing each step. Place images into `public/assets/img/screenshots/` and reference them here if desired.

## Theme Adapter Quick Start
1. Drop a free HTML template into `themes/<your-theme>/`.
2. Split the template into `layout.html` and partials (`header.html`, `footer.html`, `nav.html`, `alerts.html`).
3. Replace content areas with tokens:
   - `{{ yield:content }}` for main content
   - `{{ partial:nav }}` to include navigation
   - `{{ site.name }}`, `{{ user.name }}`, `{{ csrf }}`, `{{ asset('css/file.css') }}`
4. Update `config/app.php` and set `'layout' => '<your-theme>'`. The next request will load the new theme without rebuilding assets.

## Demo Mode
During setup, enable **Load full demo data** to populate users, characters, guilds, market orders, PvP logs, highscores cache, and media references. Demo content is marked with `is_demo = 1` so administrators can purge it later. Media entries reference placeholder paths onlyâ€”no binary files are bundled, and placeholder `.png` files under `public/assets/img/placeholders/` contain explanatory comments instead of image data.

## Security Checklist
- Use HTTPS in production and set a strong `base_url`
- Update `config/security.php` to enable captcha and adjust Argon2id costs
- Keep `storage/` non-public and configure proper permissions
- Review rate limit values for login attempts
- Regularly rotate admin credentials and monitor `audit_log`

## Route Map
| Route | Description |
|-------|-------------|
| `/` | Home with server status summary |
| `/setup` | Installation wizard |
| `/login`, `/register`, `/logout` | Authentication |
| `/account` | Profile and security settings |
| `/characters` | Character list, create, delete/cancel delete |
| `/market` | Market overview; `/market/offers`, `/market/offer/{id}` |
| `/guilds`, `/guild/{id}` | Guild listings and detail |
| `/media` | Gallery with uploads |
| `/pvp` | PvP log |
| `/status` | Detailed server status |
| `/admin` | Admin dashboard and management |

## Testing
Run unit and integration tests with PHPUnit:
```bash
vendor/bin/phpunit
```

## Packaging
To build a distributable archive:
```bash
tar czf aac.zip aac/
```
